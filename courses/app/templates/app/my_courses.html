{% extends 'app/base.html' %}

{% block title %}My Courses{% endblock %}

{% block content %}

{% load markdown_tags %}

<div class="block p-3">
 <h1 class="title">
  My Courses
 </h1>
 <p class="is-family-secondary">This is a list of all of the courses that you are currently enrolled in.</p>
</div>

{% for c in courses %}
{% get_next_deadline c user as deadline %}
{% course_is_completed c user as completed %}
{% total_completed_modules c user as modules_complete %}
<div class="box {% if deadline %}has-background-warning-light" style="border:1px solid red;{% endif %}">
 <h2 class="subtitle"><a href="{% url 'my_courses_course' c.id %}">{{ c.course.name }}</a>{% if completed %} <b>Completed</b>{% endif %}</h2>
 <div class="block is-family-secondary">{{ c.course.short_description | markdown | safe }}</div>
 <div class="block columns">
  <div class="column">
   <p class="is-family-secondary">Modules: <b>{{ modules_complete }}/{% course_module_count c.course %} complete</b></p>
  </div>
  
   <div class="column is-narrow">
    {% if deadline %}

	 <span class="icon-text">
	  <span class="is-family-secondary">
	   Next deadline: <b>{{ deadline }}</b></span>&nbsp;<span class="icon"><i class="material-icons">priority_high</i>
	  </span>
	 </span>
	{% else %}
	 {% get_course_end_date c user as enddate %}
	 <span class="icon-text">
	  <span class="is-family-secondary">
	   Course ended: <b>{{ enddate }}</b></span>&nbsp;<span class="icon"><i class="material-icons">done</i>
	  </span>
	 </span>
	{% endif %}
   </div>

 </div>
</div>

{% endfor %}

{% endblock %}
